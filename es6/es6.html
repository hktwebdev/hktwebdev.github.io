<!DOCTYPE html>
<html lang="en">
    <head>
        <title>ES6</title>

        <script>
            
        </script>
    </head>
    <body>
        <h2> 1. Variables vs Let and Const</h2>
        <h4>ES6</h4>
        <p>In ES6 let and const are block scoped '{}', a block technically means a code written in open and close curly braces </p>
        <h4>ES5</h4>
        <p>In ES5 var is function scoped </p>

        <h2>2. IIFE - Immidiately Invoked Function Expression</h2>
        <h4>############### ES 5</h4>
        <pre>
            (function(){
                var a = 2;
                var b = 3;
                var c = a+b;
            })();
        </pre>
        <p>Result: 5</p>
        <h4>############### ES 6</h4>
        <pre>
            {
                let a = 2;
                let b = 3;
                let c = a+b;
            }
        </pre>
        <p>Result: 5</p>

        <h2>3. 'Strings' in ES6 Template literals</h2>
        <pre>
        let firstName = 'John';
        let lastName = 'Smith';
        const yearOfBirth = 1990;

        function calcAge(year) {
            return 2016 - year;
        }
        </pre>
        <h4>############### ES 5</h4>
        <pre>console.log('This is ' + firstName + ' ' + lastName + '. He was born in ' + yearOfBirth + '. Today, he is ' + calcAge(yearOfBirth) + ' years old.');</pre>

        <h4>############### ES 6 Template Literals using back ticks ` `</h4>
        <pre>console.log(`This is ${firstName} ${lastName}. He was born in ${yearOfBirth}. Today he is ${calcAge(yearOfBirth)} years old`);
           
            const n = `${firstName} ${lastName}`
            n.startWith('J')  -- 'John Smith' string starts with 'J', so returns true;

            n.endsWith('th')  -- 'John Smith' string ends with 'th', so returns true;

            n.includes('oh')  -- 'John Smith' string includes with 'oh', so returns true;

            `${firstName}`.repeat(5); -- first name 'John' repeats 5 times --> John John John John John
        </pre>

        <h2>4. Arrow Functions in ES6</h2>
        <pre>
        const years = [1990, 1985, 2000, 1999, 2005];

        </pre>
        <h4>############### ES 5</h4>
        <pre>
            var ages5 = years.map(function(current){
                return el-2020;
            });
            console.log(ages5);  -->  returns all ages with array [-30, -35, -20, -21, -15].
        </pre>

        <h4>############### ES 6 Arrow functions</h4>
        <pre>
            let ages6 = years.map(current => current - 2020);   --> one argument and one liner arrow functions doesn't need return keyword and '{}'
            console.log(ages6);  -->  returns [-30, -35, -20, -21, -15].

            let ages6 = years.map((current, index) => `Age ${index + 1}: ${current - 2020}`);  --> arrow function with two arguments
            console.log(ages6)                                                                 --> returns ["ages 1 30", "ages 2 35", "ages 3 20", "ages 4 21", "ages 5 15"]

            let ages6 = years.map((current, index) => {                                        --> two arguments and multi liner arrow functions needs return keyword and '{}'
                const now = new Date().getFullYear();
                const age = now - current;

                return `age ${index + 1}: ${age}.`
            });
            console.log(ages6);                                                                --> returns ["ages 1 30", "ages 2 35", "ages 3 20", "ages 4 21", "ages 5 15"]
        </pre>

        <h4>############### ES 6 Arrow functions with 'this' lexical scope</h4>
        <pre>
        // ES5
        var box5 = {
            color: 'green',
            position: 1,
            clickMe: function() {
            
            var self = this; 
            document.querySelector('.green').addEventListener('click', function() {
                    var str = 'This is box number ' + self.position + ' and it is ' + self.color;
                    alert(str);
                });
            }
        }
        //box5.clickMe();

        // ES6
        const box6 = {
            color: 'green',
            position: 1,
            clickMe: function() {
                document.querySelector('.green').addEventListener('click', () => {
                    var str = 'This is box number ' + this.position + ' and it is ' + this.color;
                    alert(str);
                });
            }
        }
        box6.clickMe();

        const box66 = {
            color: 'green',
            position: 1,
            clickMe: () => {
                document.querySelector('.green').addEventListener('click', () => {
                    var str = 'This is box number ' + this.position + ' and it is ' + this.color;
                    alert(str);
                });
            }
        }
        box66.clickMe();

        function Person(name) {
            this.name = name;
        }

        // ES5
        Person.prototype.myFriends5 = function(friends) {
            
            var arr = friends.map(function(el) {
            return this.name + ' is friends with ' + el; 
            }.bind(this));
            
            console.log(arr);
        }

        var friends = ['Bob', 'Jane', 'Mark'];
        new Person('John').myFriends5(friends);

        // ES6
        Person.prototype.myFriends6 = function(friends) {

            var arr = friends.map(el => `${this.name} is friends with ${el}`);

            console.log(arr);
        }

        new Person('Mike').myFriends6(friends);  </pre>

        <h2>5. Destrucring </h2>
        <h4>############### ES 5</h4>
        <pre>
            var john = ['John', '30'];
            var name = john[0];                  --> to get each item from array, in ES5
            var age = john[1];
        </pre>
        <h4>############### ES 5</h4>
        <pre>
            const [name, age] = ['John', 30];    --> Destructuring array in ES6
            console.log(name);                   -->  returns 'John'

            // Object Destructuring

            const obj = {
                firstName: 'John',
                lastName: 'Smith'
            }
            const{firstName, lastName} = obj;   --> Destructuring objects in ES6
            console.log(firstName);             -->  returns 'John' from obj

            const{firstName: a, lastName: b} = obj;   --> Destructuring objects in ES6, keys are give alias names
            console.log(a);                           -->  returns 'John' from obj
            
            // return multiple values from a function 

            function calcAgeRetirement(year) {
                const age = new Date().getFullYear() - year;
                return [age, 65 - age];
            }
            
            const [age2, retirement] = calcAgeRetirement(1990);
            console.log(age2);
            console.log(retirement);
        </pre>

    </body>
    </html>
        